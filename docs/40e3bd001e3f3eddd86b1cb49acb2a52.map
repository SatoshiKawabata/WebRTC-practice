{"version":3,"sources":["../node_modules/regenerator-runtime/runtime.js","../node_modules/regenerator-runtime/runtime-module.js","../node_modules/babel-runtime/regenerator/index.js","../node_modules/hyperapp/src/index.js","index.js","../node_modules/parcel-bundler/src/builtins/bundle-url.js","../node_modules/parcel-bundler/src/builtins/css-loader.js"],"names":["h","app","name","props","node","rest","children","length","arguments","push","Array","isArray","pop","state","actions","view","container","renderLock","invokeLaterStack","rootElement","lastNode","toVNode","map","globalState","copy","wiredActions","scheduleRender","wireStateToActions","element","nodeName","toLowerCase","call","childNodes","nodeType","nodeValue","render","next","patch","setTimeout","target","source","obj","i","set","path","value","slice","get","key","action","data","then","concat","getKey","setElementProp","isSVG","oldValue","setAttribute","removeAttribute","createElement","document","createTextNode","createElementNS","oncreate","appendChild","updateElement","oldProps","onupdate","removeChildren","ondestroy","removeElement","parent","cb","done","removeChild","onremove","oldNode","nextSibling","insertBefore","oldElements","oldKeyed","newKeyed","oldChild","oldKey","j","newChild","newKey","recyledNode","MEDIA_CONST","mandatory","OfferToReceiveAudio","OfferToReceiveVideo","ICE_SERVER","url","count","selfStream","peer","selfSDP","partnerSDP","partnerStream","selfICEs","partnerICEs","down","up","startVideo","navigator","mediaDevices","getUserMedia","video","audio","stream","setSelfStream","querySelector","srcObject","connect","p","RTCPeerConnection","iceServers","onicecandidate","e","console","log","candidate","setSelfICE","addStream","onaddstream","setPartnerStream","createOffer","sd","setSelfSDP","setLocalDescription","onReceivePartnerSDP","JSON","parse","setPartnerSDP","setRemoteDescription","RTCSessionDescription","createAnswer","selfICE","onReceivePartnerICE","setPartnerICE","forEach","ice","addIceCandidate","stringify","main","body"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA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","file":"40e3bd001e3f3eddd86b1cb49acb2a52.map","sourcesContent":["/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n!(function(global) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  var inModule = typeof module === \"object\";\n  var runtime = global.regeneratorRuntime;\n  if (runtime) {\n    if (inModule) {\n      // If regeneratorRuntime is defined globally and we're in a module,\n      // make the exports object identical to regeneratorRuntime.\n      module.exports = runtime;\n    }\n    // Don't bother evaluating the rest of this file if the runtime was\n    // already defined globally.\n    return;\n  }\n\n  // Define the runtime globally (as expected by generated code) as either\n  // module.exports (if we're in a module) or a new, empty object.\n  runtime = global.regeneratorRuntime = inModule ? module.exports : {};\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  runtime.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  runtime.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  runtime.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  runtime.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration. If the Promise is rejected, however, the\n          // result for this iteration will be rejected with the same\n          // reason. Note that rejections of yielded Promises are not\n          // thrown back into the generator function, as is the case\n          // when an awaited Promise is rejected. This difference in\n          // behavior between yield and await is important, because it\n          // allows the consumer to decide what to do with the yielded\n          // rejection (swallow it and continue, manually .throw it back\n          // into the generator, abandon iteration, whatever). With\n          // await, by contrast, there is no opportunity to examine the\n          // rejection reason outside the generator function, so the\n          // only option is to throw it from the await expression, and\n          // let the generator function handle the exception.\n          result.value = unwrapped;\n          resolve(result);\n        }, reject);\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  runtime.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  runtime.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return runtime.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        if (delegate.iterator.return) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  runtime.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  runtime.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n})(\n  // In sloppy mode, unbound `this` refers to the global object, fallback to\n  // Function constructor if we're in global strict mode. That is sadly a form\n  // of indirect eval which violates Content Security Policy.\n  (function() { return this })() || Function(\"return this\")()\n);\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n// This method of obtaining a reference to the global object needs to be\n// kept identical to the way it is obtained in runtime.js\nvar g = (function() { return this })() || Function(\"return this\")();\n\n// Use `getOwnPropertyNames` because not all browsers support calling\n// `hasOwnProperty` on the global `self` object in a worker. See #183.\nvar hadRuntime = g.regeneratorRuntime &&\n  Object.getOwnPropertyNames(g).indexOf(\"regeneratorRuntime\") >= 0;\n\n// Save the old regeneratorRuntime in case it needs to be restored later.\nvar oldRuntime = hadRuntime && g.regeneratorRuntime;\n\n// Force reevalutation of runtime.js.\ng.regeneratorRuntime = undefined;\n\nmodule.exports = require(\"./runtime\");\n\nif (hadRuntime) {\n  // Restore the original runtime.\n  g.regeneratorRuntime = oldRuntime;\n} else {\n  // Remove the global property added by runtime.js.\n  try {\n    delete g.regeneratorRuntime;\n  } catch(e) {\n    g.regeneratorRuntime = undefined;\n  }\n}\n","module.exports = require(\"regenerator-runtime\");\n","export function h(name, props) {\n  var node\n  var rest = []\n  var children = []\n  var length = arguments.length\n\n  while (length-- > 2) rest.push(arguments[length])\n\n  while (rest.length) {\n    if (Array.isArray((node = rest.pop()))) {\n      for (length = node.length; length--; ) {\n        rest.push(node[length])\n      }\n    } else if (node != null && node !== true && node !== false) {\n      children.push(node)\n    }\n  }\n\n  return typeof name === \"function\"\n    ? name(props || {}, children)\n    : {\n        name: name,\n        props: props || {},\n        children: children\n      }\n}\n\nexport function app(state, actions, view, container) {\n  var renderLock\n  var invokeLaterStack = []\n  var rootElement = (container && container.children[0]) || null\n  var lastNode = rootElement && toVNode(rootElement, [].map)\n  var globalState = copy(state)\n  var wiredActions = copy(actions)\n\n  scheduleRender(wireStateToActions([], globalState, wiredActions))\n\n  return wiredActions\n\n  function toVNode(element, map) {\n    return {\n      name: element.nodeName.toLowerCase(),\n      props: {},\n      children: map.call(element.childNodes, function(element) {\n        return element.nodeType === 3\n          ? element.nodeValue\n          : toVNode(element, map)\n      })\n    }\n  }\n\n  function render() {\n    renderLock = !renderLock\n\n    var next = view(globalState, wiredActions)\n    if (container && !renderLock) {\n      rootElement = patch(container, rootElement, lastNode, (lastNode = next))\n    }\n\n    while ((next = invokeLaterStack.pop())) next()\n  }\n\n  function scheduleRender() {\n    if (!renderLock) {\n      renderLock = !renderLock\n      setTimeout(render)\n    }\n  }\n\n  function copy(target, source) {\n    var obj = {}\n\n    for (var i in target) obj[i] = target[i]\n    for (var i in source) obj[i] = source[i]\n\n    return obj\n  }\n\n  function set(path, value, source) {\n    var target = {}\n    if (path.length) {\n      target[path[0]] =\n        path.length > 1 ? set(path.slice(1), value, source[path[0]]) : value\n      return copy(source, target)\n    }\n    return value\n  }\n\n  function get(path, source) {\n    for (var i = 0; i < path.length; i++) {\n      source = source[path[i]]\n    }\n    return source\n  }\n\n  function wireStateToActions(path, state, actions) {\n    for (var key in actions) {\n      typeof actions[key] === \"function\"\n        ? (function(key, action) {\n            actions[key] = function(data) {\n              if (typeof (data = action(data)) === \"function\") {\n                data = data(get(path, globalState), actions)\n              }\n\n              if (\n                data &&\n                data !== (state = get(path, globalState)) &&\n                !data.then // Promise\n              ) {\n                scheduleRender(\n                  (globalState = set(path, copy(state, data), globalState))\n                )\n              }\n\n              return data\n            }\n          })(key, actions[key])\n        : wireStateToActions(\n            path.concat(key),\n            (state[key] = state[key] || {}),\n            (actions[key] = copy(actions[key]))\n          )\n    }\n  }\n\n  function getKey(node) {\n    return node && node.props ? node.props.key : null\n  }\n\n  function setElementProp(element, name, value, isSVG, oldValue) {\n    if (name === \"key\") {\n    } else if (name === \"style\") {\n      for (var i in copy(oldValue, value)) {\n        element[name][i] = value == null || value[i] == null ? \"\" : value[i]\n      }\n    } else {\n      if (typeof value === \"function\" || (name in element && !isSVG)) {\n        element[name] = value == null ? \"\" : value\n      } else if (value != null && value !== false) {\n        element.setAttribute(name, value)\n      }\n\n      if (value == null || value === false) {\n        element.removeAttribute(name)\n      }\n    }\n  }\n\n  function createElement(node, isSVG) {\n    var element =\n      typeof node === \"string\" || typeof node === \"number\"\n        ? document.createTextNode(node)\n        : (isSVG = isSVG || node.name === \"svg\")\n          ? document.createElementNS(\"http://www.w3.org/2000/svg\", node.name)\n          : document.createElement(node.name)\n\n    if (node.props) {\n      if (node.props.oncreate) {\n        invokeLaterStack.push(function() {\n          node.props.oncreate(element)\n        })\n      }\n\n      for (var i = 0; i < node.children.length; i++) {\n        element.appendChild(createElement(node.children[i], isSVG))\n      }\n\n      for (var name in node.props) {\n        setElementProp(element, name, node.props[name], isSVG)\n      }\n    }\n\n    return element\n  }\n\n  function updateElement(element, oldProps, props, isSVG) {\n    for (var name in copy(oldProps, props)) {\n      if (\n        props[name] !==\n        (name === \"value\" || name === \"checked\"\n          ? element[name]\n          : oldProps[name])\n      ) {\n        setElementProp(element, name, props[name], isSVG, oldProps[name])\n      }\n    }\n\n    if (props.onupdate) {\n      invokeLaterStack.push(function() {\n        props.onupdate(element, oldProps)\n      })\n    }\n  }\n\n  function removeChildren(element, node, props) {\n    if ((props = node.props)) {\n      for (var i = 0; i < node.children.length; i++) {\n        removeChildren(element.childNodes[i], node.children[i])\n      }\n\n      if (props.ondestroy) {\n        props.ondestroy(element)\n      }\n    }\n    return element\n  }\n\n  function removeElement(parent, element, node, cb) {\n    function done() {\n      parent.removeChild(removeChildren(element, node))\n    }\n\n    if (node.props && (cb = node.props.onremove)) {\n      cb(element, done)\n    } else {\n      done()\n    }\n  }\n\n  function patch(parent, element, oldNode, node, isSVG, nextSibling) {\n    if (node === oldNode) {\n    } else if (oldNode == null) {\n      element = parent.insertBefore(createElement(node, isSVG), element)\n    } else if (node.name && node.name === oldNode.name) {\n      updateElement(\n        element,\n        oldNode.props,\n        node.props,\n        (isSVG = isSVG || node.name === \"svg\")\n      )\n\n      var oldElements = []\n      var oldKeyed = {}\n      var newKeyed = {}\n\n      for (var i = 0; i < oldNode.children.length; i++) {\n        oldElements[i] = element.childNodes[i]\n\n        var oldChild = oldNode.children[i]\n        var oldKey = getKey(oldChild)\n\n        if (null != oldKey) {\n          oldKeyed[oldKey] = [oldElements[i], oldChild]\n        }\n      }\n\n      var i = 0\n      var j = 0\n\n      while (j < node.children.length) {\n        var oldChild = oldNode.children[i]\n        var newChild = node.children[j]\n\n        var oldKey = getKey(oldChild)\n        var newKey = getKey(newChild)\n\n        if (newKeyed[oldKey]) {\n          i++\n          continue\n        }\n\n        if (newKey == null) {\n          if (oldKey == null) {\n            patch(element, oldElements[i], oldChild, newChild, isSVG)\n            j++\n          }\n          i++\n        } else {\n          var recyledNode = oldKeyed[newKey] || []\n\n          if (oldKey === newKey) {\n            patch(element, recyledNode[0], recyledNode[1], newChild, isSVG)\n            i++\n          } else if (recyledNode[0]) {\n            patch(\n              element,\n              element.insertBefore(recyledNode[0], oldElements[i]),\n              recyledNode[1],\n              newChild,\n              isSVG\n            )\n          } else {\n            patch(element, oldElements[i], null, newChild, isSVG)\n          }\n\n          j++\n          newKeyed[newKey] = newChild\n        }\n      }\n\n      while (i < oldNode.children.length) {\n        var oldChild = oldNode.children[i]\n        if (getKey(oldChild) == null) {\n          removeElement(element, oldElements[i], oldChild)\n        }\n        i++\n      }\n\n      for (var i in oldKeyed) {\n        if (!newKeyed[oldKeyed[i][1].props.key]) {\n          removeElement(element, oldKeyed[i][0], oldKeyed[i][1])\n        }\n      }\n    } else if (node.name === oldNode.name) {\n      element.nodeValue = node\n    } else {\n      element = parent.insertBefore(\n        createElement(node, isSVG),\n        (nextSibling = element)\n      )\n      removeElement(parent, nextSibling, oldNode)\n    }\n    return element\n  }\n}\n","import { h, app } from \"hyperapp\";\nimport \"./style.css\";\n\nconst MEDIA_CONST = {\n  mandatory: { OfferToReceiveAudio: true, OfferToReceiveVideo: true },\n};\n\nconst ICE_SERVER = { url: \"stun:stun.l.google.com:19302\" };\n\nconst state = {\n  count: 0,\n  selfStream: null,\n  peer: null,\n  selfSDP: null,\n  partnerSDP: null,\n  partnerStream: null,\n  selfICEs: [],\n  partnerICEs: [],\n};\n\nconst actions = {\n  down: () => (state) => ({ count: state.count - 1 }),\n  up: () => (state) => ({ count: state.count + 1 }),\n\n  startVideo: () => async (state, actions) => {\n    const stream = await navigator.mediaDevices.getUserMedia({\n      video: true,\n      audio: true,\n    });\n    actions.setSelfStream(stream);\n  },\n\n  setSelfStream: (stream) => {\n    document.querySelector(\"#self-video\").srcObject = stream;\n    return {\n      selfStream: stream,\n    };\n  },\n\n  connect: () => (state, actions) => {\n    const peer = (() => {\n      // peer connectionを新規作成\n      const p = new RTCPeerConnection({\n        iceServers: [ICE_SERVER],\n      });\n      p.onicecandidate = (e) => {\n        console.log(\"on candidate\", e.candidate);\n        if (e.candidate) {\n          actions.setSelfICE(e.candidate);\n        }\n      };\n      p.addStream(state.selfStream);\n      p.onaddstream = (e) => {\n        actions.setPartnerStream(e.stream);\n      };\n      return p;\n    })();\n    // offerを作成する\n    peer.createOffer(MEDIA_CONST).then((sd) => {\n      actions.setSelfSDP(sd);\n    });\n    return { peer };\n  },\n\n  setSelfSDP: (selfSDP) => (state) => {\n    state.peer.setLocalDescription(selfSDP);\n    return { selfSDP };\n  },\n\n  setPartnerStream: (stream) => {\n    document.querySelector(\"#partner-video\").srcObject = stream;\n    return {\n      partnerStream: stream,\n    };\n  },\n\n  onReceivePartnerSDP: (e) => (state, actions) => {\n    const partnerSDP = JSON.parse(e.target.value);\n    return { partnerSDP };\n  },\n\n  setPartnerSDP: () => (state, actions) => {\n    const { partnerSDP } = state;\n    let { peer } = state;\n    if (peer) {\n      // answerが来たのでそれをセットして接続を開始する\n      peer.setRemoteDescription(new RTCSessionDescription(partnerSDP));\n    } else {\n      // offerが来たのでanswerを作成する\n      peer = (() => {\n        // create peer connection\n        const p = new RTCPeerConnection({ iceServers: [ICE_SERVER] });\n        p.onicecandidate = (e) => {\n          if (e.candidate) {\n            actions.setSelfICE(e.candidate);\n          }\n        };\n        p.addStream(state.selfStream);\n        p.onaddstream = (e) => {\n          actions.setPartnerStream(e.stream);\n        };\n        return p;\n      })();\n\n      peer.setRemoteDescription(new RTCSessionDescription(partnerSDP));\n      peer.createAnswer(MEDIA_CONST).then((selfSDP) => {\n        actions.setSelfSDP(selfSDP);\n      });\n    }\n    return { partnerSDP, peer };\n  },\n\n  setSelfICE: (selfICE) => (state) => {\n    state.selfICEs.push(selfICE);\n    return { selfICEs: state.selfICEs };\n  },\n\n  onReceivePartnerICE: (e) => (state, actions) => {\n    const partnerICEs = JSON.parse(e.target.value);\n    return { partnerICEs };\n  },\n\n  setPartnerICE: () => (state, actions) => {\n    const { partnerICEs, peer } = state;\n    partnerICEs.forEach((ice) => {\n      peer.addIceCandidate(ice);\n    });\n    return {};\n  },\n};\n\nconst view = (state, actions) => {\n  console.log(\"update\", state);\n  return (\n    <main>\n      <button type=\"button\" onclick={actions.startVideo}>\n        ビデオキャプチャ開始\n      </button>\n      <button type=\"button\" onclick={actions.connect}>\n        接続開始\n      </button>\n      <div>\n        <video id=\"self-video\" autoplay controls></video>\n        <video id=\"partner-video\" autoplay controls></video>\n      </div>\n      <div>\n        <p>自分のSDP(相手に教える必要がある)</p>\n        <textarea rows=\"5\" cols=\"100\" disabled>\n          {JSON.stringify(state.selfSDP)}\n        </textarea>\n      </div>\n      <div>\n        <p>相手のSDP(自分が知る必要がある)</p>\n        <textarea\n          rows=\"5\"\n          cols=\"100\"\n          onchange={actions.onReceivePartnerSDP}\n        ></textarea>\n        <button type=\"button\" onclick={actions.setPartnerSDP}>\n          読み込み\n        </button>\n      </div>\n      <div>\n        <p>自分のICE Candidate(相手に教える必要がある)</p>\n        <textarea rows=\"5\" cols=\"100\" disabled>\n          {JSON.stringify(state.selfICEs)}\n        </textarea>\n      </div>\n      <div>\n        <p>相手のICE Candidate(自分が知る必要がある)</p>\n        <textarea\n          rows=\"5\"\n          cols=\"100\"\n          onchange={actions.onReceivePartnerICE}\n        ></textarea>\n        <button type=\"button\" onclick={actions.setPartnerICE}>\n          読み込み\n        </button>\n      </div>\n    </main>\n  );\n};\n\nexport const main = app(state, actions, view, document.body);\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n"]}